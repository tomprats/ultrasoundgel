.container-fluid
  .row
    .col-12
      .card
        .card-header
          %h4 New/Edit Post
        .card-body
          = render partial: "form"
  .row
    .col-12
      .card.card-default.paginate-card-table
        .card-header
          %h4 Posts
        .table-responsive
          %table.table.table-bordered.table-hover
            %thead
              %tr
                %th Published
                %th Episode
                %th Title
                %th Public Tags
                %th
            %tbody
              - Post.all.each do |post|
                %tr
                  %td= post.published_at_date
                  %td= post.episode && link_to(post.episode.title, edit_admin_episode_path(post.episode))
                  %td= post.title
                  %td= post.public_tags.join(", ")
                  %td
                    = link_to "View", post
                    &vert;
                    - if post.published?
                      = link_to "Edit", edit_admin_post_path(post), data: { confirm: "#{post.title} is already published. Still want to edit?" }
                      &vert;
                    - else
                      = link_to "Publish", "#", class: "publish", data: { toggle: "modal", target: "#publish-modal", action: admin_post_publish_path(post) }
                      &vert;
                      = link_to "Edit", edit_admin_post_path(post)
                      &vert;
                    = link_to "Delete", admin_post_path(post), method: :delete, data: { confirm: "Are you sure you want to delete #{post.title}?" }
= render partial: "partials/publish_modal"
